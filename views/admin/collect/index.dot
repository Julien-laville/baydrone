---
layout: ../../layout/admin.dot
---
[[##body:

<h1>Collectors</h1>

[[? !model.collectors ]]
    - no collectors yet -
[[?]]

<a href="/admin/collect/new">New</a>

<ul>
[[~ model.collectors:collector ]]

    <li id="collector_[[= collector.id ]]">

    [[= collector.site ]]

    <a href="#" onclick="startCrawl([[= collector.id ]])">Start</a>

    <a href="/admin/collect/[[= collector.id ]]/edit">Edit</a>

    <a href="#" onclick="urlCrawl([[= collector.id ]])">Urls</a>

    <a href="#" onclick="deleteCrawl([[= collector.id ]])" style="color:red">Delete</a>

    </li>

[[~]]
</ul>
<script src="/javascript/vendors/promise.js"></script>
<script>


    function startCrawl(id) {
        var startCrawlPromise = promise.get('/admin/collect/' + id + '/start')
        startCrawlPromise.then(function(error, data) {
            console.log(data);
        });
    }

    function deleteCrawl(id) {
        var deleteCrawlPromise = promise.get('/admin/collect/' + id + '/delete')
        deleteCrawlPromise.then(function(error, data) {
            var item = document.getElementById('collector_' + id);
            item.style.display = 'none';
        });
    }

    function urlCrawl(id) {
     var urlCrawlPromise = promise.get('/admin/collect/' + id + '/url')
            urlCrawlPromise.then(function(error, data) {
                console.log(data);
            });
    }


</script>

#]]